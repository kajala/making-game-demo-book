<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Engine Core: Hashtable.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8-20040824 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a></div>
<h1>Hashtable.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef _LANG_HASHTABLE_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define _LANG_HASHTABLE_H</span>
00003 <span class="preprocessor"></span>
00004 
00005 <span class="preprocessor">#include &lt;lang/Object.h&gt;</span>
00006 <span class="preprocessor">#include &lt;lang/assert.h&gt;</span>
00007 
00008 
00009 <span class="keyword">namespace </span>lang
00010 {
00011 
00012     
<a name="l00020"></a><a class="code" href="../../d0/d9c/classlang_1_1Hash.html">00020</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> K&gt; <span class="keyword">class </span><a class="code" href="../../d0/d9c/classlang_1_1Hash.html">Hash</a>
00021 {
00022 <span class="keyword">public</span>:
00023     <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> K&amp; x )<span class="keyword"> const</span>
00024 <span class="keyword">    </span>{
00025         <span class="keywordflow">return</span> x.hashCode();
00026     }
00027 };
00028 
00029 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span><a class="code" href="../../d0/d9c/classlang_1_1Hash.html">Hash</a>&lt;char&gt; 
00030     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">char</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
00031 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;short&gt; 
00032     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">short</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
00033 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;int&gt; 
00034     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> x;}};
00035 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;float&gt; 
00036     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">float</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> *(<span class="keywordtype">int</span>*)&amp;x;}};
00037 <span class="keyword">template</span> &lt;&gt; <span class="keyword">class </span>Hash&lt;long&gt; 
00038     {<span class="keyword">public</span>: <span class="keywordtype">int</span> operator()( <span class="keyword">const</span> <span class="keywordtype">long</span>&amp; x )<span class="keyword"> const </span>{<span class="keywordflow">return</span> (int)x;}};
00039 
00040 
00041 <span class="comment">/*</span>
00042 <span class="comment"> * Data structure used by the Hashtable implementation. </span>
00043 <span class="comment"> */</span>
00044 <span class="keyword">template</span> &lt;<span class="keyword">class</span> K, <span class="keyword">class</span> T&gt; <span class="keyword">class </span>HashtablePair
00045 {
00046 <span class="keyword">public</span>:
00047     K                   key;
00048     T                   value;
00049     HashtablePair&lt;K,T&gt;* next;
00050     <span class="keywordtype">bool</span>                used;
00051 
00052     HashtablePair()
00053     {   
00054         defaults();
00055     }
00056 
00057     <span class="keywordtype">void</span> defaults()
00058     {
00059         next = 0;
00060         used = <span class="keyword">false</span>;
00061         key = K();
00062         value = T();
00063     }
00064 };
00065 
00066 
<a name="l00071"></a><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">00071</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> K, <span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator</a>
00072 {
00073 <span class="keyword">public</span>:
00074     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator</a>()                                                             {m_data=0; m_last=0; m_index=0; m_item=0;}
00075     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator</a>( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap, HashtablePair&lt;K,T&gt;* item, <span class="keywordtype">int</span> index );
00076 
00078     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a4">operator++</a>();
00079 
<a name="l00081"></a><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a5">00081</a>     <span class="keywordtype">bool</span>            <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a5">operator==</a>( <span class="keyword">const</span> <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; other )<span class="keyword"> const         </span>{<span class="keywordflow">return</span> m_item == other.<a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#r2">m_item</a>;}
00082 
<a name="l00084"></a><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a3">00084</a>     <span class="keywordtype">bool</span>            <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a3">operator!=</a>( <span class="keyword">const</span> <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>&amp; other )<span class="keyword"> const         </span>{<span class="keywordflow">return</span> m_item != other.<a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#r2">m_item</a>;}
00085 
<a name="l00087"></a><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a2">00087</a>     <span class="keyword">const</span> K&amp;        <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a2">key</a>()<span class="keyword"> const                                                     </span>{assert( m_item ); <span class="keywordflow">return</span> m_item-&gt;key;}
00088 
<a name="l00090"></a><a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a6">00090</a>     T&amp;              <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html#a6">value</a>()<span class="keyword"> const                                                   </span>{assert( m_item ); <span class="keywordflow">return</span> m_item-&gt;value;}
00091 
00092 <span class="keyword">private</span>:
00093     HashtablePair&lt;K,T&gt;*     m_data;
00094     <span class="keywordtype">int</span>                     m_last;
00095     <span class="keywordtype">int</span>                     m_index;
00096     HashtablePair&lt;K,T&gt;*     m_item;
00097 };
00098 
00099     
<a name="l00109"></a><a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">00109</a> <span class="keyword">template</span> &lt; <span class="keyword">class</span> K, <span class="keyword">class</span> T, <span class="keyword">class</span> F=Hash&lt;K&gt; &gt; <span class="keyword">class </span><a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable</a> :
00110     <span class="keyword">public</span> lang::<a class="code" href="../../dc/d47/classlang_1_1Object.html">Object</a>
00111 {
00112 <span class="keyword">public</span>:
00114     <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a9">Hashtable</a>();
00115 
00120     <span class="keyword">explicit</span> <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a9">Hashtable</a>( <span class="keywordtype">int</span> initialcapacity, <span class="keywordtype">float</span> loadfactor=0.75f, 
00121         <span class="keyword">const</span> T&amp; defaultvalue=T(), <span class="keyword">const</span> F&amp; hashfunc=F() );
00122 
00124     <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a9">Hashtable</a>( <span class="keyword">const</span> <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
00125 
00127     ~<a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable</a>();
00128 
00130     <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a12">operator=</a>( <span class="keyword">const</span> <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
00131 
00133     T&amp;          <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a14">operator[]</a>( <span class="keyword">const</span> K&amp; key );
00134 
00139     <span class="keywordtype">void</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a15">put</a>( <span class="keyword">const</span> K&amp; key, <span class="keyword">const</span> T&amp; value );
00140 
00145     <span class="keywordtype">void</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a16">remove</a>( <span class="keyword">const</span> K&amp; key );
00146 
00148     <span class="keywordtype">void</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a1">clear</a>();
00149 
00155     <span class="keywordtype">void</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a11">merge</a>( <span class="keyword">const</span> <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html">Hashtable&lt;K,T,F&gt;</a>&amp; other );
00156 
00158     <span class="keyword">const</span> T&amp;    <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a14">operator[]</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
00159 
00164     <span class="keyword">const</span> T&amp;    <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a5">get</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
00165 
00170     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a6">getIterator</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
00171 
00173     <span class="keywordtype">int</span>         <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a17">size</a>() <span class="keyword">const</span>;
00174 
00176     <span class="keywordtype">bool</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a10">isEmpty</a>() <span class="keyword">const</span>;
00177 
00179     <span class="keywordtype">bool</span>        <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a3">containsKey</a>( <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
00180 
00185     <span class="keywordtype">int</span>         <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a2">collisions</a>() <span class="keyword">const</span>;
00186 
00191     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a0">begin</a>() <span class="keyword">const</span>;
00192 
00197     <a class="code" href="../../df/dff/classlang_1_1HashtableIterator.html">HashtableIterator&lt;K,T&gt;</a>  <a class="code" href="../../dc/d83/classlang_1_1Hashtable.html#a4">end</a>() <span class="keyword">const</span>;
00198 
00199 <span class="keyword">private</span>:
00200     <span class="keywordtype">int</span>                     m_cap;
00201     HashtablePair&lt;K,T&gt;*     m_data;
00202     <span class="keywordtype">float</span>                   m_loadFactor;
00203     <span class="keyword">mutable</span> <span class="keywordtype">int</span>             m_entries;
00204     <span class="keywordtype">int</span>                     m_entryLimit;
00205     T                       m_defaultValue;
00206     <span class="keyword">mutable</span> <span class="keywordtype">int</span>             m_collisions;
00207     F                       m_hashFunc;
00208 
00209     <span class="keywordtype">void</span>                defaults();
00210     <span class="keywordtype">void</span>                destroy();
00211     <span class="keywordtype">void</span>                grow();
00212     <span class="keywordtype">void</span>                rehashTo( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
00213     HashtablePair&lt;K,T&gt;* allocateTable( <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
00214     <span class="keywordtype">void</span>                deallocateTable( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap ) <span class="keyword">const</span>;
00215     HashtablePair&lt;K,T&gt;* getPair( HashtablePair&lt;K,T&gt;* data, <span class="keywordtype">int</span> cap, <span class="keyword">const</span> K&amp; key ) <span class="keyword">const</span>;
00216 };
00217 
00218 
00219 <span class="preprocessor">#include &lt;lang/Hashtable.inl&gt;</span>
00220 
00221 
00222 } <span class="comment">// lang</span>
00223 
00224 
00225 <span class="preprocessor">#endif // _LANG_HASHTABLE_H</span>
00226 <span class="preprocessor"></span>
00227 <span class="comment">// Copyright (C) 2005 Jani Kajala. All rights reserved. Consult your license regarding permissions and restrictions.</span>
</pre></div><br><br><small>Copyright (C) 2004 Jani Kajala. All rights reserved. Consult your license regarding permissions and restrictions.</small><br><br></body></html>
