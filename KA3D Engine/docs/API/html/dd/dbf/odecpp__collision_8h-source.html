<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Engine Core: odecpp_collision.h Source File</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8-20040824 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a></div>
<h1>odecpp_collision.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment"> *                                   *</span>
00003 <span class="comment"> * Open Dynamics Engine, Copyright (C) 2001,2002 Russell L. Smith.   *</span>
00004 <span class="comment"> * All rights reserved.  Email: russ@q12.org   Web: www.q12.org      *</span>
00005 <span class="comment"> *                                   *</span>
00006 <span class="comment"> * This library is free software; you can redistribute it and/or     *</span>
00007 <span class="comment"> * modify it under the terms of EITHER:                  *</span>
00008 <span class="comment"> *   (1) The GNU Lesser General Public License as published by the Free  *</span>
00009 <span class="comment"> *   Software Foundation; either version 2.1 of the License, or (at  *</span>
00010 <span class="comment"> *   your option) any later version. The text of the GNU Lesser  *</span>
00011 <span class="comment"> *   General Public License is included with this library in the     *</span>
00012 <span class="comment"> *   file LICENSE.TXT.                       *</span>
00013 <span class="comment"> *   (2) The BSD-style license that is included with this library in     *</span>
00014 <span class="comment"> *   the file LICENSE-BSD.TXT.                   *</span>
00015 <span class="comment"> *                                   *</span>
00016 <span class="comment"> * This library is distributed in the hope that it will be useful,   *</span>
00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of    *</span>
00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the files    *</span>
00019 <span class="comment"> * LICENSE.TXT and LICENSE-BSD.TXT for more details.             *</span>
00020 <span class="comment"> *                                   *</span>
00021 <span class="comment"> *************************************************************************/</span>
00022 
00023 <span class="comment">/* C++ interface for new collision API */</span>
00024 
00025 
00026 <span class="preprocessor">#ifndef _ODE_ODECPP_COLLISION_H_</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _ODE_ODECPP_COLLISION_H_</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#ifdef __cplusplus</span>
00029 <span class="preprocessor"></span>
00030 <span class="preprocessor">#include &lt;ode/error.h&gt;</span>
00031 
00032 
00033 <span class="keyword">class </span>dGeom {
00034   <span class="comment">// intentionally undefined, don't use these</span>
00035   dGeom (dGeom &amp;);
00036   <span class="keywordtype">void</span> operator= (dGeom &amp;);
00037 
00038 <span class="keyword">protected</span>:
00039   dGeomID _id;
00040 
00041 <span class="keyword">public</span>:
00042   dGeom()
00043     { _id = 0; }
00044   ~dGeom()
00045     { <span class="keywordflow">if</span> (_id) dGeomDestroy (_id); }
00046 
00047   dGeomID id()<span class="keyword"> const</span>
00048 <span class="keyword">    </span>{ <span class="keywordflow">return</span> _id; }
00049   operator dGeomID()<span class="keyword"> const</span>
00050 <span class="keyword">    </span>{ <span class="keywordflow">return</span> _id; }
00051 
00052   <span class="keywordtype">void</span> destroy() {
00053     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00054     _id = 0;
00055   }
00056 
00057   <span class="keywordtype">int</span> getClass()<span class="keyword"> const</span>
00058 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetClass (_id); }
00059 
00060   dSpaceID getSpace()<span class="keyword"> const</span>
00061 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetSpace (_id); }
00062 
00063   <span class="keywordtype">void</span> setData (<span class="keywordtype">void</span> *data)
00064     { dGeomSetData (_id,data); }
00065   <span class="keywordtype">void</span> *getData()<span class="keyword"> const</span>
00066 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetData (_id); }
00067 
00068   <span class="keywordtype">void</span> setBody (dBodyID b)
00069     { dGeomSetBody (_id,b); }
00070   dBodyID getBody()<span class="keyword"> const</span>
00071 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetBody (_id); }
00072 
00073   <span class="keywordtype">void</span> setPosition (dReal x, dReal y, dReal z)
00074     { dGeomSetPosition (_id,x,y,z); }
00075   <span class="keyword">const</span> dReal * getPosition()<span class="keyword"> const</span>
00076 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetPosition (_id); }
00077 
00078   <span class="keywordtype">void</span> setRotation (<span class="keyword">const</span> dMatrix3 R)
00079     { dGeomSetRotation (_id,R); }
00080   <span class="keyword">const</span> dReal * getRotation()<span class="keyword"> const</span>
00081 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomGetRotation (_id); }
00082     
00083   <span class="keywordtype">void</span> setQuaternion (<span class="keyword">const</span> dQuaternion quat)
00084     { dGeomSetQuaternion (_id,quat); }
00085   <span class="keywordtype">void</span> getQuaternion (dQuaternion quat)<span class="keyword"> const</span>
00086 <span class="keyword">    </span>{ dGeomGetQuaternion (_id,quat); }
00087 
00088   <span class="keywordtype">void</span> getAABB (dReal aabb[6])<span class="keyword"> const</span>
00089 <span class="keyword">    </span>{ dGeomGetAABB (_id, aabb); }
00090 
00091   <span class="keywordtype">int</span> isSpace()
00092     { <span class="keywordflow">return</span> dGeomIsSpace (_id); }
00093 
00094   <span class="keywordtype">void</span> setCategoryBits (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bits)
00095     { dGeomSetCategoryBits (_id, bits); }
00096   <span class="keywordtype">void</span> setCollideBits (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bits)
00097     { dGeomSetCollideBits (_id, bits); }
00098   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> getCategoryBits()
00099     { <span class="keywordflow">return</span> dGeomGetCategoryBits (_id); }
00100   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> getCollideBits()
00101     { <span class="keywordflow">return</span> dGeomGetCollideBits (_id); }
00102 
00103   <span class="keywordtype">void</span> enable()
00104     { dGeomEnable (_id); }
00105   <span class="keywordtype">void</span> disable()
00106     { dGeomDisable (_id); }
00107   <span class="keywordtype">int</span> isEnabled()
00108     { <span class="keywordflow">return</span> dGeomIsEnabled (_id); }
00109 
00110   <span class="keywordtype">void</span> collide2 (dGeomID g, <span class="keywordtype">void</span> *data, dNearCallback *callback)
00111     { dSpaceCollide2 (_id,g,data,callback); }
00112 };
00113 
00114 
00115 <span class="keyword">class </span>dSpace : <span class="keyword">public</span> dGeom {
00116   <span class="comment">// intentionally undefined, don't use these</span>
00117   dSpace (dSpace &amp;);
00118   <span class="keywordtype">void</span> operator= (dSpace &amp;);
00119 
00120 <span class="keyword">protected</span>:
00121   <span class="comment">// the default constructor is protected so that you</span>
00122   <span class="comment">// can't instance this class. you must instance one</span>
00123   <span class="comment">// of its subclasses instead.</span>
00124   dSpace () { _id = 0; }
00125 
00126 <span class="keyword">public</span>:
00127   dSpaceID id()<span class="keyword"> const</span>
00128 <span class="keyword">    </span>{ <span class="keywordflow">return</span> (dSpaceID) _id; }
00129   operator dSpaceID()<span class="keyword"> const</span>
00130 <span class="keyword">    </span>{ <span class="keywordflow">return</span> (dSpaceID) _id; }
00131 
00132   <span class="keywordtype">void</span> setCleanup (<span class="keywordtype">int</span> mode)
00133     { dSpaceSetCleanup (<span class="keywordtype">id</span>(), mode); }
00134   <span class="keywordtype">int</span> getCleanup()
00135     { <span class="keywordflow">return</span> dSpaceGetCleanup (<span class="keywordtype">id</span>()); }
00136 
00137   <span class="keywordtype">void</span> add (dGeomID x)
00138     { dSpaceAdd (<span class="keywordtype">id</span>(), x); }
00139   <span class="keywordtype">void</span> remove (dGeomID x)
00140     { dSpaceRemove (<span class="keywordtype">id</span>(), x); }
00141   <span class="keywordtype">int</span> query (dGeomID x)
00142     { <span class="keywordflow">return</span> dSpaceQuery (<span class="keywordtype">id</span>(),x); }
00143 
00144   <span class="keywordtype">int</span> getNumGeoms()
00145     { <span class="keywordflow">return</span> dSpaceGetNumGeoms (<span class="keywordtype">id</span>()); }
00146   dGeomID getGeom (<span class="keywordtype">int</span> i)
00147     { <span class="keywordflow">return</span> dSpaceGetGeom (<span class="keywordtype">id</span>(),i); }
00148 
00149   <span class="keywordtype">void</span> collide (<span class="keywordtype">void</span> *data, dNearCallback *callback)
00150     { dSpaceCollide (<span class="keywordtype">id</span>(),data,callback); }
00151 };
00152 
00153 
00154 <span class="keyword">class </span>dSimpleSpace : <span class="keyword">public</span> dSpace {
00155   <span class="comment">// intentionally undefined, don't use these</span>
00156   dSimpleSpace (dSimpleSpace &amp;);
00157   <span class="keywordtype">void</span> operator= (dSimpleSpace &amp;);
00158 
00159 <span class="keyword">public</span>:
00160   dSimpleSpace (dSpaceID space)
00161     { _id = (dGeomID) dSimpleSpaceCreate (space); }
00162 };
00163 
00164 
00165 <span class="keyword">class </span>dHashSpace : <span class="keyword">public</span> dSpace {
00166   <span class="comment">// intentionally undefined, don't use these</span>
00167   dHashSpace (dHashSpace &amp;);
00168   <span class="keywordtype">void</span> operator= (dHashSpace &amp;);
00169 
00170 <span class="keyword">public</span>:
00171   dHashSpace (dSpaceID space)
00172     { _id = (dGeomID) dHashSpaceCreate (space); }
00173   <span class="keywordtype">void</span> setLevels (<span class="keywordtype">int</span> minlevel, <span class="keywordtype">int</span> maxlevel)
00174     { dHashSpaceSetLevels (<span class="keywordtype">id</span>(),minlevel,maxlevel); }
00175 };
00176 
00177 
00178 <span class="keyword">class </span>dQuadTreeSpace : <span class="keyword">public</span> dSpace {
00179   <span class="comment">// intentionally undefined, don't use these</span>
00180   dQuadTreeSpace (dQuadTreeSpace &amp;);
00181   <span class="keywordtype">void</span> operator= (dQuadTreeSpace &amp;);
00182 
00183 <span class="keyword">public</span>:
00184   dQuadTreeSpace (dSpaceID space, dVector3 center, dVector3 extents, <span class="keywordtype">int</span> depth)
00185     { _id = (dGeomID) dQuadTreeSpaceCreate (space,center,extents,depth); }
00186 };
00187 
00188 
00189 <span class="keyword">class </span>dSphere : <span class="keyword">public</span> dGeom {
00190   <span class="comment">// intentionally undefined, don't use these</span>
00191   dSphere (dSphere &amp;);
00192   <span class="keywordtype">void</span> operator= (dSphere &amp;);
00193 
00194 <span class="keyword">public</span>:
00195   dSphere () { }
00196   dSphere (dSpaceID space, dReal radius)
00197     { _id = dCreateSphere (space, radius); }
00198 
00199   <span class="keywordtype">void</span> create (dSpaceID space, dReal radius) {
00200     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00201     _id = dCreateSphere (space, radius);
00202   }
00203 
00204   <span class="keywordtype">void</span> setRadius (dReal radius)
00205     { dGeomSphereSetRadius (_id, radius); }
00206   dReal getRadius()<span class="keyword"> const</span>
00207 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomSphereGetRadius (_id); }
00208 };
00209 
00210 
00211 <span class="keyword">class </span>dBox : <span class="keyword">public</span> dGeom {
00212   <span class="comment">// intentionally undefined, don't use these</span>
00213   dBox (dBox &amp;);
00214   <span class="keywordtype">void</span> operator= (dBox &amp;);
00215 
00216 <span class="keyword">public</span>:
00217   dBox () { }
00218   dBox (dSpaceID space, dReal lx, dReal ly, dReal lz)
00219     { _id = dCreateBox (space,lx,ly,lz); }
00220 
00221   <span class="keywordtype">void</span> create (dSpaceID space, dReal lx, dReal ly, dReal lz) {
00222     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00223     _id = dCreateBox (space,lx,ly,lz);
00224   }
00225 
00226   <span class="keywordtype">void</span> setLengths (dReal lx, dReal ly, dReal lz)
00227     { dGeomBoxSetLengths (_id, lx, ly, lz); }
00228   <span class="keywordtype">void</span> getLengths (dVector3 result)<span class="keyword"> const</span>
00229 <span class="keyword">    </span>{ dGeomBoxGetLengths (_id,result); }
00230 };
00231 
00232 
00233 <span class="keyword">class </span>dPlane : <span class="keyword">public</span> dGeom {
00234   <span class="comment">// intentionally undefined, don't use these</span>
00235   dPlane (dPlane &amp;);
00236   <span class="keywordtype">void</span> operator= (dPlane &amp;);
00237 
00238 <span class="keyword">public</span>:
00239   dPlane() { }
00240   dPlane (dSpaceID space, dReal a, dReal b, dReal c, dReal d)
00241     { _id = dCreatePlane (space,a,b,c,d); }
00242 
00243   <span class="keywordtype">void</span> create (dSpaceID space, dReal a, dReal b, dReal c, dReal d) {
00244     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00245     _id = dCreatePlane (space,a,b,c,d);
00246   }
00247 
00248   <span class="keywordtype">void</span> setParams (dReal a, dReal b, dReal c, dReal d)
00249     { dGeomPlaneSetParams (_id, a, b, c, d); }
00250   <span class="keywordtype">void</span> getParams (dVector4 result)<span class="keyword"> const</span>
00251 <span class="keyword">    </span>{ dGeomPlaneGetParams (_id,result); }
00252 };
00253 
00254 
00255 <span class="keyword">class </span>dCCylinder : <span class="keyword">public</span> dGeom {
00256   <span class="comment">// intentionally undefined, don't use these</span>
00257   dCCylinder (dCCylinder &amp;);
00258   <span class="keywordtype">void</span> operator= (dCCylinder &amp;);
00259 
00260 <span class="keyword">public</span>:
00261   dCCylinder() { }
00262   dCCylinder (dSpaceID space, dReal radius, dReal length)
00263     { _id = dCreateCCylinder (space,radius,length); }
00264 
00265   <span class="keywordtype">void</span> create (dSpaceID space, dReal radius, dReal length) {
00266     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00267     _id = dCreateCCylinder (space,radius,length);
00268   }
00269 
00270   <span class="keywordtype">void</span> setParams (dReal radius, dReal length)
00271     { dGeomCCylinderSetParams (_id, radius, length); }
00272   <span class="keywordtype">void</span> getParams (dReal *radius, dReal *length)<span class="keyword"> const</span>
00273 <span class="keyword">    </span>{ dGeomCCylinderGetParams (_id,radius,length); }
00274 };
00275 
00276 
00277 <span class="keyword">class </span>dRay : <span class="keyword">public</span> dGeom {
00278   <span class="comment">// intentionally undefined, don't use these</span>
00279   dRay (dRay &amp;);
00280   <span class="keywordtype">void</span> operator= (dRay &amp;);
00281 
00282 <span class="keyword">public</span>:
00283   dRay() { }
00284   dRay (dSpaceID space, dReal length)
00285     { _id = dCreateRay (space,length); }
00286 
00287   <span class="keywordtype">void</span> create (dSpaceID space, dReal length) {
00288     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00289     _id = dCreateRay (space,length);
00290   }
00291 
00292   <span class="keywordtype">void</span> setLength (dReal length)
00293     { dGeomRaySetLength (_id, length); }
00294   dReal getLength()
00295     { <span class="keywordflow">return</span> dGeomRayGetLength (_id); }
00296 
00297   <span class="keywordtype">void</span> set (dReal px, dReal py, dReal pz, dReal dx, dReal dy, dReal dz)
00298     { dGeomRaySet (_id, px, py, pz, dx, dy, dz); }
00299   <span class="keywordtype">void</span> get (dVector3 start, dVector3 dir)
00300     { dGeomRayGet (_id, start, dir); }
00301 
00302   <span class="keywordtype">void</span> setParams (<span class="keywordtype">int</span> firstContact, <span class="keywordtype">int</span> backfaceCull)
00303     { dGeomRaySetParams (_id, firstContact, backfaceCull); }
00304   <span class="keywordtype">void</span> getParams (<span class="keywordtype">int</span> *firstContact, <span class="keywordtype">int</span> *backfaceCull)
00305     { dGeomRayGetParams (_id, firstContact, backfaceCull); }
00306   <span class="keywordtype">void</span> setClosestHit (<span class="keywordtype">int</span> closestHit)
00307     { dGeomRaySetClosestHit (_id, closestHit); }
00308   <span class="keywordtype">int</span> getClosestHit()
00309     { <span class="keywordflow">return</span> dGeomRayGetClosestHit (_id); }
00310 };
00311 
00312 
00313 <span class="keyword">class </span>dGeomTransform : <span class="keyword">public</span> dGeom {
00314   <span class="comment">// intentionally undefined, don't use these</span>
00315   dGeomTransform (dGeomTransform &amp;);
00316   <span class="keywordtype">void</span> operator= (dGeomTransform &amp;);
00317 
00318 <span class="keyword">public</span>:
00319   dGeomTransform() { }
00320   dGeomTransform (dSpaceID space)
00321     { _id = dCreateGeomTransform (space); }
00322 
00323   <span class="keywordtype">void</span> create (dSpaceID space=0) {
00324     <span class="keywordflow">if</span> (_id) dGeomDestroy (_id);
00325     _id = dCreateGeomTransform (space);
00326   }
00327 
00328   <span class="keywordtype">void</span> setGeom (dGeomID geom)
00329     { dGeomTransformSetGeom (_id, geom); }
00330   dGeomID getGeom()<span class="keyword"> const</span>
00331 <span class="keyword">    </span>{ <span class="keywordflow">return</span> dGeomTransformGetGeom (_id); }
00332 
00333   <span class="keywordtype">void</span> setCleanup (<span class="keywordtype">int</span> mode)
00334     { dGeomTransformSetCleanup (_id,mode); }
00335   <span class="keywordtype">int</span> getCleanup ()
00336     { <span class="keywordflow">return</span> dGeomTransformGetCleanup (_id); }
00337 
00338   <span class="keywordtype">void</span> setInfo (<span class="keywordtype">int</span> mode)
00339     { dGeomTransformSetInfo (_id,mode); }
00340   <span class="keywordtype">int</span> getInfo()
00341     { <span class="keywordflow">return</span> dGeomTransformGetInfo (_id); }
00342 };
00343 
00344 
00345 <span class="preprocessor">#endif</span>
00346 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</pre></div><br><br><small>Copyright (C) 2004 Jani Kajala. All rights reserved. Consult your license regarding permissions and restrictions.</small><br><br></body></html>
